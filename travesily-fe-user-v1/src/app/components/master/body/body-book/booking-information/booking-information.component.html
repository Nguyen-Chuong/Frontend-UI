<div class="container-fluid bg-white pt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <div class="row shadow mb-3">
          <div class="card">
            <div class="card-body">
              <h3 class="m-0 text-primary d-flex align-items-center"><span
                class="material-icons me-3">account_box</span> Welcome, {{account.firstname}} {{account.lastname}}</h3>
            </div>
          </div>
        </div>

        <div class="row shadow mb-3">
          <div class="card">
            <div class="card-body">
              <h3 class="text-success">
                <i class="fa fa-check"></i>Great choice of property
              </h3>
            </div>
          </div>
        </div>
        <div class="row shadow mb-3">
          <div class="card">
            <div class="card-body">
              <h2 class="card-title">Contact details</h2>
              <h3>{{account.firstname}} {{account.lastname}}</h3>
              <h3>{{account.email}}</h3>
              <h3>{{account.phone}}</h3>
            </div>
          </div>
        </div>

        <div class="row shadow mb-3">
          <div class="card">
            <div class="card-body">
              <h2 class="card-title">Let us know what you need</h2>
              <h3>Please let us know if you have any additional needs</h3>
              <div class="card">
                <div class="card-body">
                  <form [formGroup]="bookingForm">
                    <h3>Do you prefer any smoking configuration?</h3>
                    <div class="form-check d-flex align-items-center">
                      <span><input class="form-check-input" type="radio" value="Smoking" formControlName="smoking"
                                   name="radioSmoking"
                                   id="radioSmoking"></span>
                      <label class="form-check-label" for="radioSmoking">
                        <h3 class="m-0 d-flex align-items-center text-primary"><span class="material-icons">smoking_rooms</span>
                          Smoking</h3>
                      </label>
                    </div>
                    <div class="form-check d-flex align-items-center">
                      <span><input class="form-check-input" type="radio" value="Non-Smoking" formControlName="smoking"
                                   name="radioSmoking"
                                   id="radioNonSmoking" checked></span>
                      <label class="form-check-label" for="radioNonSmoking">
                        <h3 class="m-0 d-flex align-items-center text-danger"><span
                          class="material-icons">smoke_free</span>
                          Non-smoking</h3>
                      </label>
                    </div>
                    <hr>
                    <h3>Do you have any bed configuration?</h3>
                    <div class="form-check d-flex align-items-center">
                      <span><input class="form-check-input" type="radio" value="1 large bed" formControlName="bed"
                                   name="radioBed"
                                   id="radioBed"></span>
                      <label class="form-check-label" for="radioBed">
                        <h3 class="m-0 d-flex align-items-center text-primary"><span class="material-icons">bed</span> 1
                          large bed
                        </h3>
                      </label>
                    </div>
                    <div class="form-check d-flex align-items-center">
                      <span><input class="form-check-input" type="radio" value="Twin bed" formControlName="bed"
                                   name="radioBed"
                                   id="radioBedTwin" checked></span>
                      <label class="form-check-label" for="radioBedTwin">
                        <h3 class="m-0 d-flex align-items-center text-success"><span
                          class="material-icons">single_bed</span><span
                          class="material-icons">single_bed</span> Twin bed</h3>
                      </label>
                    </div>
                    <hr>
                    <div class="dropdown">
                      <a class="text-primary" (click)="toggleTextArea()">
                        <h4><i *ngIf="!isShow" class="fa fa-plus-circle"></i><i *ngIf="isShow"
                                                                                class="fa fa-minus-circle"></i> Click
                          here for more request</h4>
                      </a>
                      <div *ngIf="isShow" class="border p-3">
                        <textarea formControlName="additional" class="item-fullwidth p-3"></textarea>
                      </div>
                    </div>
                  </form>
                </div>

              </div>
            </div>
          </div>
        </div>
        <div class="row shadow mb-3">
          <div class="card">
            <div class="card-body">
              <h4>By proceeding this booking, I agree to Travesily's terms of use and Privacy Policy</h4>

              <h3 class="text-success d-block float-end">RISK FREE! No cancellation fee before 23:59 hrs. on April 7,
                2022 (property local time)</h3>
              <button type="button" class="btn btn-primary d-block float-end" [disabled]="carts.length ===0"
                      (click)="checkOut()">PROCEED TO
                CHECKOUT!
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4 ps-5">
        <div class="row mb-3 shadow">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-md-4">
                  <img [src]="hotel.avatar" alt="Hotel" class="img-fluid">
                </div>
                <div class="col-md-8">
                  <h2 class="card-title m-0">{{hotel.name}}</h2>
                  <h2>
                    <span class="fa fa-star {{hotel.star>=1?'checked':''}}"></span>
                    <span class="fa fa-star {{hotel.star>=2?'checked':''}}"></span>
                    <span class="fa fa-star {{hotel.star>=3?'checked':''}}"></span>
                    <span class="fa fa-star {{hotel.star>=4?'checked':''}}"></span>
                    <span class="fa fa-star {{hotel.star>=5?'checked':''}}"></span>
                  </h2>
                  <h4>{{hotel.address}}, {{hotel.district?.nameDistrict}}, {{hotel.district?.city?.nameCity}}</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ng-container *ngFor="let roomDetail of roomDetails; let i = index">
          <div class="row mb-3 shadow">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-md-9">
                    <h3><b>{{carts[i].dateIn | date}} - {{carts[i].dateOut | date}}</b></h3>
                  </div>
                  <div class="col-md-3"><h3><b>{{carts[i].dateOut?.getDate() - carts[i].dateIn?.getDate()}} nights</b>
                  </h3></div>
                </div>
                <div class="row">
                  <div class="col-md-9">
                    <h3>{{carts[i].quantity}} x {{roomDetail.name}}</h3>
                  </div>
                </div>
                <div class="row">Reviews</div>
                <hr>
                <div class="row">
                  <div class="col-md-4">
                    <img [src]="roomDetail.listImage[0].src" alt="" class="img-fluid">
                  </div>
                  <div class="col-md-8">
                    <h4 class="card-text text-grey"><i class="fa fa-male"></i> {{carts[i].quantity}}
                      room(s)</h4>
                    <h4 class="card-text text-grey"><i class="fa fa-male"></i> {{roomDetail.numberOfPeople}} adults</h4>
                    <ul class="list-inline">
                      <li class="text-success" *ngFor="let benefitType of roomDetail.listBenefit"><h4><i
                        class="fa fa-check"></i> {{benefitType.benefits[0].name}}</h4></li>
                    </ul>
                  </div>
                </div>
                <hr>
              </div>
            </div>
          </div>
        </ng-container>
        <div *ngIf="carts.length === 1 && roomDetails[0]?.dealPercentage >0 " class="row shadow mb-3">
          <div class="card border-danger border-start">
            <div class="card-body p-4">
              <h3 class="m-0 d-flex align-items-center"><span class="material-icons pe-3 text-danger">alarm</span> We
                only have {{roomDetails[0].availableRooms}} rooms left at this price</h3>
            </div>
          </div>
        </div>
        <div class="row mb-3 shadow">
          <div class="card">
            <div class="card-body">
              <div *ngIf="roomDetails[0]?.dealPercentage > 0 || roomDetails[1]?.dealPercentage > 0"
                   class="d-flex justify-content-between">
                <h4>Original price ({{carts[0]?.quantity + carts[1]?.quantity}} room<span
                  *ngIf="(carts[0]?.quantity+carts[1]?.quantity) > 1">s</span>
                  x {{carts[0]?.dateOut?.getDate() - carts[0]?.dateIn?.getDate()}} night<span
                    *ngIf="(carts[0]?.dateOut?.getDate() - carts[0]?.dateIn?.getDate()) > 1">s</span>):</h4>
                <h4 class="text-danger">
                  <s>{{roomDetails[0]?.price * carts[0]?.quantity + roomDetails[1]?.price * carts[1]?.quantity | number}}
                    đ</s></h4>
              </div>
              <div class="d-flex justify-content-between">
                <h4>Our price ({{carts[0]?.quantity + carts[1]?.quantity}} room<span
                  *ngIf="(carts[0]?.quantity+carts[1]?.quantity) > 1">s</span>
                  x {{carts[0]?.dateOut?.getDate() - carts[0]?.dateIn?.getDate()}} night<span
                    *ngIf="(carts[0]?.dateOut?.getDate() - carts[0]?.dateIn?.getDate()) > 1">s</span>):</h4>
                <h4
                  class="text-success">{{(roomDetails[0]?.price - roomDetails[0]?.price * roomDetails[0]?.dealPercentage / 100) * carts[0]?.quantity + (roomDetails[1]?.price * carts[1]?.quantity - roomDetails[1]?.price * roomDetails[1]?.dealPercentage / 100) | number}}
                  đ</h4>
              </div>

              <div class="d-flex justify-content-between">
                <h4>Booking fees</h4>
                <h4 class="text-primary">FREE</h4>
              </div>

            </div>
            <div class="card-footer p-4">
              <div class="d-flex justify-content-between">
                <h3><b>Price</b></h3>
                <h3>
                  <b>{{((roomDetails[0]?.price - roomDetails[0]?.price * roomDetails[0]?.dealPercentage / 100) * carts[0]?.quantity + (roomDetails[1]?.price * carts[1]?.quantity - roomDetails[1]?.price * roomDetails[1]?.dealPercentage / 100)) * (100 + hotel.taxPercentage) / 100 | number}}
                    đ</b></h3>
              </div>
              <h5><b>Applied fees: </b>Tax {{hotel.taxPercentage}}%</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
